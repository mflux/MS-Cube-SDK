<!DOCTYPE HTML>
<html>
<head>
	<script src="/socket.io/socket.io.js" type="text/javascript"></script>
	<script src="vendor/p5.min.js" type="text/javascript"7></script>
	<script src="vendor/three.min.js" type="text/javascript"7></script>
	<script src="vendor/OrbitControls.js" type="text/javascript"></script>
	<script src="vendor/jquery.min.js" type="text/javascript"7></script>
	<script src="vendor/jquery.timeago.js" type="text/javascript"></script>	
	<script>
	jQuery.data( $( "head" )[ 0 ], "data", {
	  server_url: "%server_url%"
	});
	</script>
	<script src="application.js" type="text/javascript"></script>
	<script src="sketch.js" type="text/javascript"></script>	
	<link rel="stylesheet" type="text/css" href="styles.css">

	<style type="text/css">
		body { 
			margin: 0;
			overflow: hidden;
		}
		/*canvas { width: 100%; height: 100% }*/
		.preview {
			position: absolute;
			top: 0px;
			left: 0px;
			z-index: 100;
			display: none;
		}
		.render {
			position: absolute;
			top: 0px;
			left: 0px;
			z-index: 50;			
		}
	</style>



</head>
<body>

	<script type="x-shader/x-vertex" id="vertexshader">

		const float imageWidth = 512.0;
		const float imageHeight = 424.0;	

		uniform sampler2D depthTexture;		
		attribute float index;

		varying float depthColor;

		void main() {

			float x = mod( index, imageWidth );
			float y = ( index - x ) / imageWidth;

			vec2 textureUV = vec2( x / imageWidth, y / imageHeight );
			float depth = texture2D( depthTexture, textureUV ).x * 800.0;			

			vec3 absPos = vec3( x, y, depth );

			vec4 mvPosition = modelViewMatrix * vec4( absPos, 1.0 );
			
			gl_PointSize = 1.0;

			gl_Position = projectionMatrix * mvPosition;

		}

	</script>

	<script type="x-shader/x-fragment" id="fragmentshader">
		varying float depthColor;

		void main() {
			gl_FragColor = vec4( 1.0, 1.0, 1.0, 1.0 );
		}

	</script>	
</body>
</html>
